angular.module("carShowcaseApp.templates",[]).run(["$templateCache",function(a){"use strict";a.put("scripts/common/directives/compare-list-btn/compare-list-btn.tpl.html",'<div class="btn-group"> <div class="btn btn-default" ng-disabled="!compareList.length || compareList.length < 2" ng-class="{\'disabled\': !compareList.length}"> <span class="fa fa-list-ul"></span> <span ng-if="!compareList.length">Compare list empty</span> <span ng-if="compareList.length"> <a ui-sref="compare({\'compareList\': compareList})">Compare now ({{compareList.length}})</a> </span> </div> <div class="btn btn-default dropdown-toggle" title="Show comparison list" ng-class="{\'disabled\': !compareList.length}" data-toggle="dropdown" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </div> <ul class="dropdown-menu" role="menu"> <li class="compare-list__dropdown__item" title="Remove item" ng-repeat="item in compareList" ng-click="removeItem(item)"> <a href="#"> <span class="fa fa-remove"></span> <span>{{item.model}} - {{::item.brand}}</span> </a> </li> <li class="divider"></li> <li ng-class="{\'disabled\': !compareList.length}"><a href="#" ng-click="cleanList()">Clean list</a></li> </ul> </div>'),a.put("scripts/common/directives/image-holder/image-holder.tpl.html",'<div class="image-holder" ng-class="!isLoaded && holderClass"> <div ng-class="{ \'image-holder__item--loaded\' : isLoaded}" class="image-holder__item"> </div> <div ng-class="{\'image-holder__no-item--loaded\': isLoaded }" class="image-holder__no-item center-block"> <span class="fa fa-2x fa-refresh fa-spin center"></span> </div> </div>'),a.put("scripts/common/directives/search-input/search-input.tpl.html",'<div> <div class="input-group"> <span class="search__addon input-group-addon hidden-xs"> <i class="fa fa-search"></i> </span> <input type="text" placeholder="Search model" class="search__input form-control" auto-focus ng-model="searchText" ng-model-options="{debounce: 200}"> <span class="search__clean btn btn-default input-group-addon" ng-click="cleanSearch()"> <i class="fa fa-remove"></i> </span> </div> </div>'),a.put("scripts/common/services/car-detail-modal/car-detail-modal.html",'<div class="car-detail modal-content"> <div class="modal-header"> <h3 class="modal-title">Detail {{::car.brand}} - {{::car.model}}</h3> </div> <div class="modal-body text-center row"> <div class="detail-info col-sm-4 col-xs-6"> <div class="detail-info__item"> <span class="label label-info col-xs-4">Model</span> <span class="col-xs-8">{{::car.model}}</span> </div> <div class="detail-info__item"> <span class="label label-info col-xs-4">Year</span> <span class="col-xs-8">{{::car.year}}</span> </div> <div class="detail-info__item"> <span class="label label-info col-xs-4">Brand</span> <span class="col-xs-8">{{::car.brand}}</span> </div> <div class="detail-info__item"> <span class="label label-info col-xs-4">Price</span> <span class="col-xs-8">{{::car.price | currency}}</span> </div> <div class="detail-info__item--checkbox"> <div class="checkbox row"> <label> <input type="checkbox" ng-disabled=" !compare && isListFull()" ng-model="compare">Add to comparison list </label> </div> </div> </div> <div class="detail-image col-sm-8 col-xs-6" ng-click="showFullImage(car.imageUrl)"> <image-holder class="car-detail__image img-thumbnail" src="car.imageUrl"> </image-holder> <div class="detail-image__zoom-btn btn btn-info"> <i class="fa fa-search-plus fa-2x"></i> </div> </div> </div> <div class="modal-footer"> <button class="btn btn-primary" ng-click="close()">Close</button> </div> </div>'),a.put("scripts/compare/compare.html",'<div class="panel panel-default"> <div class="panel-heading pal" fixed-position distance="86"> <div class="compare-list-headers bg-primary h2 center-text row"> <div class="compare-list-header" ng-class="{\'col-xs-4\': compareList.length ===2,\n        \'col-xs-3\': compareList.length === 3}"> Attribute</div> <div class="compare-list-header" ng-repeat="item in ::compareList" ng-class="{\'col-xs-4\': compareList.length ===2,\n        \'col-xs-3\': compareList.length === 3}"> {{::item.model}}</div> </div> </div> <div class="compare-body panel-body"> <ul class="compare-list list-group"> <li class="compare-list__item-row list-group-item row" ng-repeat="(key, value) in ::compareList[0]"> <div ng-class="{\'col-xs-4\': compareList.length ===2,\n          \'col-xs-3\': compareList.length === 3}"><b>{{::key | capitalize }}</b></div> <div class="compare-list__item-cell" ng-repeat="item in ::compareList" ng-class="{\'col-xs-4\': compareList.length ===2,\n          \'col-xs-3\': compareList.length === 3}"> <div ng-if="key !==\'price\' && key !== \'imageUrl\'">{{::item[key]}}</div> <div ng-if="key ===\'price\'">{{::item[key] | currency}}</div> <div ng-if="key ===\'imageUrl\'" class="compare-list__item-cell--image" ng-click="openImageModal(item)"> <image-holder class="img-thumbnail" src="item[key]"> </image-holder> </div> </div> </li> </ul> </div> </div>'),a.put("scripts/showcase/showcase.html",'<div class="panel panel-default"> <div class="panel-heading pal" fixed-position distance="86"> <div class="row"> <search-input ng-model="search" search-text="search" class="search-bar col-sm-10 col-xs-8"> </search-input> <a type="button" href="#" class="btn btn-primary col-sm-1 col-xs-4" ng-click="refresh()"> <i class="fa fa-refresh"></i> </a> </div> <div class="row"> <compare-list-btn compare-list="compareList" class="col-xs-12"> </compare-list-btn> </div> </div> <ul class="car-list fixed-sibling"> <li class="columns-info bg-primary h2 center-text row"> <div class="columns-info__item col-sm-2 col-xs-4">Model</div> <div class="columns-info__item col-sm-2 col-xs-1 hidden-xs">Year</div> <div class="columns-info__item col-sm-2 col-xs-4">Brand</div> <div class="columns-info__item col-sm-2 col-xs-1 hidden-xs">Price</div> <div class="columns-info__item col-sm-4 col-xs-4">Image</div> </li> <li ng-click="openDetail(car)" class="car-list__item center-text" ng-class="{\'bg-warning\': isInCompareList(car)}" ng-animate="" ng-repeat="car in carList | orderBy: \'model\' | filter: {model: search}"> <div class="col-sm-2 col-xs-4">{{::car.model}}</div> <div class="col-sm-2 hidden-xs">{{::car.year}}</div> <div class="col-sm-2 col-xs-4">{{::car.brand}}</div> <div class="col-sm-2 hidden-xs">{{::car.price | currency}}</div> <div class="col-sm-4 col-xs-4 car-item__image"> <image-holder class="img-thumbnail" src="car.imageUrl"> </image-holder> </div> </li> </ul> </div>')}]),angular.module("carShowcaseApp",["carShowcaseApp.templates","ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ui.bootstrap","ui.router","carShowcaseApp.services","carShowcaseApp.directives","carShowcaseApp.showcase","carShowcaseApp.compare"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("showcase",{url:"/",templateUrl:"scripts/showcase/showcase.html",controller:"ShowCaseCtrl"}),a.state("compare",{url:"/compare",templateUrl:"scripts/compare/compare.html",controller:"CompareCtrl",params:{compareList:null}})}]),angular.module("carShowcaseApp").constant("ROUTE_CONFIG",{DEFAULT_STATE:"showcase"}),angular.module("carShowcaseApp").controller("AppCtrl",function(){}),angular.module("carShowcaseApp.showcase",["carShowcaseApp.services.carDetailModalService","carShowcaseApp.services.carService"]),angular.module("carShowcaseApp.showcase").controller("ShowCaseCtrl",["$scope","carService","carDetailModalService","compareListService",function(a,b,c,d){a.compareList=d.compareList,a.isInCompareList=d.isInList,a.refresh=function(){b.getCarsFromJSON().then(function(b){a.carList=b.cars})},a.openDetail=function(a){var b=c.showModal(a);b.result["finally"](function(){})},a.refresh()}]),angular.module("carShowcaseApp.compare",[]),angular.module("carShowcaseApp.compare").controller("CompareCtrl",["$scope","$stateParams","$modal","ROUTE_CONFIG",function(a,b,c,d){a.goHome=function(){a.go(d.DEFAULT_STATE)},a.openImageModal=function(a){c.open({size:"lg",template:'<img class="detail-image__zoom" src="'+a.imageUrl+'" >'})},a.compareList=b.compareList}]),angular.module("carShowcaseApp.services",["carShowcaseApp.services.carService","carShowcaseApp.services.carDetailModalService","carShowcaseApp.services.compareListService","carShowcaseApp.filters"]),angular.module("carShowcaseApp.filters",[]).filter("capitalize",function(){return function(a){return a?a.charAt(0).toUpperCase()+a.substring(1):""}}),angular.module("carShowcaseApp.services.carDetailModalService",["ui.bootstrap"]).factory("carDetailModalService",["$modal","compareListService",function(a,b){function c(c){return a.open({size:"lg",templateUrl:"scripts/common/services/car-detail-modal/car-detail-modal.html",controller:["$scope","$modalInstance",function(d,e){var f=!0;d.car=c,d.close=function(){e.close(!0)},d.isListFull=b.isListFull,d.showFullImage=function(b){a.open({size:"lg",template:'<img class="detail-image__zoom" src="'+b+'" >'})},b.isInList(c)&&(d.compare=!0),d.$watch("compare",function(a){f?f=!1:void 0!==a&&b.toggleToList(d.car)})}]})}return{showModal:c}}]),angular.module("carShowcaseApp.services.carService",[]).factory("carService",["$http","$resource",function(a,b){function c(){return f.get().$promise.then(function(a){return a.data})}function d(){return a.get("/data.json",{responseType:"json"}).then(function(a){return a.data})}var e="/services/car",f=b(e,{},{get:{cache:!1,method:"GET",responseType:"json"}});return{getCarsFromJSON:d,getCarsFromWebService:c}}]),angular.module("carShowcaseApp.services.compareListService",[]).constant("COMPARE_LIST_CONFIG",{MAX_COMPARE_ITEMS:3}).factory("compareListService",["COMPARE_LIST_CONFIG",function(a){function b(a){var b=e.indexOf(a);-1===b?e.push(a):e.splice(b,1)}function c(a){return-1!==e.indexOf(a)}function d(){return e.length===a.MAX_COMPARE_ITEMS}var e=[];return{compareList:e,isInList:c,isListFull:d,toggleToList:b}}]),angular.module("carShowcaseApp.directives",["carShowcaseApp.directives.autoFocus","carShowcaseApp.directives.compareListBtn","carShowcaseApp.directives.fixedPosition","carShowcaseApp.directives.imageHolder","carShowcaseApp.directives.searchInput"]),angular.module("carShowcaseApp.directives.autoFocus",[]).directive("autoFocus",function(){return{restrict:"A",link:function(a,b,c){(""===c.autoFocus||"true"===c.autoFocus)&&b.focus()}}}),angular.module("carShowcaseApp.directives.compareListBtn",[]).directive("compareListBtn",function(){return{restrict:"E",templateUrl:"scripts/common/directives/compare-list-btn/compare-list-btn.tpl.html",replace:!0,scope:{compareList:"="},link:function(a){a.removeItem=function(b){var c=a.compareList.indexOf(b);a.compareList.splice(c,1)},a.cleanList=function(){if(a.compareList)for(;a.compareList.length;)a.compareList.pop()}}}}),angular.module("carShowcaseApp.directives.fixedPosition",[]).directive("fixedPosition",["$window",function(a){return{restrict:"A",scope:{distance:"="},link:function(b,c){a.addEventListener("scroll",function(){$(a).scrollTop()>(b.distance||0)?c.addClass("fixed"):c.removeClass("fixed")})}}}]),angular.module("carShowcaseApp.directives.imageHolder",[]).directive("imageHolder",function(){return{restrict:"E",templateUrl:"scripts/common/directives/image-holder/image-holder.tpl.html",replace:!0,scope:{src:"=",holderClass:"@"},link:function(a,b){var c=new Image;c.onload=function(){a.$apply(function(){b.find(".image-holder__item").css("background-image",'url("'+a.src+'")'),a.isLoaded=!0})},c.src=a.src}}}),angular.module("carShowcaseApp.directives.searchInput",["carShowcaseApp.directives.autoFocus"]).directive("searchInput",function(){return{restrict:"E",templateUrl:"scripts/common/directives/search-input/search-input.tpl.html",replace:!0,scope:{searchText:"="},link:function(a,b){a.cleanSearch=function(){a.searchText="",b.find("input").focus()}}}});